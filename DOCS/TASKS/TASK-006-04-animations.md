# TASK-006-04: Анимации и переходы

**Дата создания:** 2025-12-12 12:13 (UTC+3, Брест)  
**Статус:** Новая  
**Приоритет:** Средний  
**Исполнитель:** Bitrix24 Программист (Vue.js)  
**Родительская задача:** [TASK-006](TASK-006-styling-adaptivity.md)  
**Подэтап:** 6.4 из 5  
**Длительность:** 0.5 дня

---

## Описание

Добавление плавных анимаций и переходов во всём интерфейсе табеля присутствия: переходы при изменении данных, анимация модальных окон и улучшенная анимация загрузки.

**Связь с ТЗ:** [DOCS/TZ/interface-timesheet-calendar.md](../TZ/interface-timesheet-calendar.md) - разделы 3, 10.4  
**Связь с этапами:** [DOCS/TZ/implementation-stages.md](../TZ/implementation-stages.md) - Этап 6, Подэтап 6.4

---

## Контекст

Это четвёртый подэтап стилизации интерфейса. Анимации и переходы улучшают пользовательский опыт, делая интерфейс более отзывчивым и приятным в использовании.

**Зависит от:**
- Все компоненты из TASK-004 и TASK-005 (должны быть готовы)

---

## Модули и компоненты

### Frontend (Vue.js)
- Все компоненты (добавление анимаций)

### CSS
- CSS Animations и Transitions

---

## Зависимости

- **От каких задач зависит:**
  - Все компоненты из TASK-004 и TASK-005
- **Какие задачи зависят от этой:**
  - Нет (это последний подэтап стилизации)

---

## Ступенчатые подзадачи

### Шаг 1: Плавные переходы при изменении данных
1. Добавить transition для ячеек календаря:
   - Переход при изменении цвета фона
   - Переход при изменении содержимого
2. Добавить transition для статистики:
   - Переход при изменении чисел
   - Плавное появление/исчезновение

### Шаг 2: Анимация модальных окон
1. Обновить стили `EditDayModal.vue`
2. Добавить fade-in для overlay:
   - Плавное появление затемнения
3. Добавить slide-in для модального окна:
   - Плавное появление снизу или сверху
   - Плавное исчезновение

### Шаг 3: Анимация загрузки
1. Обновить стили `Preloader.vue`
2. Улучшить анимацию spinner:
   - Плавное вращение
   - Дополнительные эффекты (опционально)
3. Добавить анимацию для индикатора сохранения:
   - Плавное появление/исчезновение
   - Анимация при сохранении

---

## Технические требования

### CSS
- **Версия:** CSS3
- **Animations:** CSS @keyframes
- **Transitions:** CSS transitions

### Производительность
- Анимации должны быть плавными (60 FPS)
- Использовать transform и opacity для производительности

---

## Критерии приёмки

- [ ] Реализованы плавные переходы при изменении данных:
  - [ ] Переходы при обновлении ячеек календаря
  - [ ] Переходы при изменении статистики
- [ ] Реализована анимация открытия/закрытия модальных окон:
  - [ ] Fade-in для overlay
  - [ ] Slide-in для модального окна
- [ ] Реализована анимация загрузки:
  - [ ] Улучшена анимация прелоадера
  - [ ] Добавлена анимация для индикатора сохранения
- [ ] Все анимации плавные и не нагружают производительность

---

## Примеры кода

### Переходы для ячеек календаря
```vue
<style scoped>
.calendar-cell {
  transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
}

.calendar-cell:hover {
  transform: scale(1.02);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
</style>
```

### Анимация модального окна
```vue
<style scoped>
.modal-overlay {
  animation: fadeIn 0.2s;
}

.modal-content {
  animation: slideIn 0.3s;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideIn {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
</style>
```

### Улучшенная анимация прелоадера
```vue
<style scoped>
.preloader-spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Дополнительный эффект пульсации */
.preloader-spinner::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(52, 152, 219, 0.3) 0%, transparent 70%);
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.5; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.1); }
}
</style>
```

---

## Тестирование

### Тестирование анимаций
1. Проверить плавность всех анимаций
2. Проверить производительность (60 FPS)
3. Проверить работу на разных устройствах

---

## История правок

- **2025-12-12 12:13 (UTC+3, Брест):** Создана задача TASK-006-04

---

## Примечания

### Важные замечания
- Анимации должны быть плавными и не нагружать производительность
- Использовать transform и opacity для лучшей производительности
- Анимации должны быть ненавязчивыми

### Следующие шаги
После завершения этого подэтапа можно переходить к:
- TASK-006-05: Оптимизация производительности

---

## Связь с документацией

- **Родительская задача:** [TASK-006](TASK-006-styling-adaptivity.md)
- **Техническое задание:** [DOCS/TZ/interface-timesheet-calendar.md](../TZ/interface-timesheet-calendar.md) - разделы 3, 10.4

