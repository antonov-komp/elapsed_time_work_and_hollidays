# TASK-005-03: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Store)

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-12 12:04 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-12-12 12:32 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–±–æ—Ç–µ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js)  
**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** [TASK-005](TASK-005-functional-components.md)  
**–ü–æ–¥—ç—Ç–∞–ø:** 5.3 –∏–∑ 6 (–≠—Ç–∞–ø 3 –∏–∑ 6)  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 2 –¥–Ω—è

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!

**–≠—Ç–æ –≠–¢–ê–ü 3 –∏–∑ 6 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ –∑–∞–¥–∞—á–∏ TASK-005.**

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –¢–†–ï–ë–û–í–ê–ù–ò–ï:
**–≠—Ç–æ—Ç —ç—Ç–∞–ø –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —ç—Ç–∞–ø–æ–≤ 4, 5 –∏ 6!**
**–ù–ï –Ω–∞—á–∏–Ω–∞–π—Ç–µ —ç—Ç–∞–ø—ã 4, 5 –∏–ª–∏ 6 –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞!**

### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
1. ‚úÖ **–≠—Ç–∞–ø—ã 1 –∏ 2 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω—ã** (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
   - [TASK-005-01](TASK-005-01-edit-day-modal.md)
   - [TASK-005-02](TASK-005-02-fill-week-button.md)
2. ‚úÖ **–ù–∞—á–Ω–∏—Ç–µ —Å —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞** (TASK-005-03) ‚Äî **–ö–†–ò–¢–ò–ß–ù–û!**
3. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ‚Üí –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ **–≠—Ç–∞–ø–∞–º 4, 5, 6**:
   - [TASK-005-04](TASK-005-04-auto-save.md) ‚Äî –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
   - [TASK-005-05](TASK-005-05-statistics-calculation.md) ‚Äî –†–∞—Å—á—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - [TASK-005-06](TASK-005-06-integration.md) ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–π —ç—Ç–∞–ø)

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Pinia (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- –°–æ–∑–¥–∞—Ç—å Store `timesheetStore.js` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å state, actions –∏ getters
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Store

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- TASK-003-01: –°–µ—Ä–≤–∏—Å Bitrix24 API (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–æ—Ç–æ–≤)
- TASK-003-02: –°–µ—Ä–≤–∏—Å —Ç–∞–±–µ–ª—è (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–æ—Ç–æ–≤)
- TASK-003-03: –°–µ—Ä–≤–∏—Å –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–æ—Ç–æ–≤)

---

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω–∏–µ Store (Pinia) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç–∞–±–µ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–∞–±–µ–ª—è, –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –∏ UI, –∞ —Ç–∞–∫–∂–µ actions –∏ getters –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.

**–°–≤—è–∑—å —Å –¢–ó:** [DOCS/TZ/interface-timesheet-calendar.md](../TZ/interface-timesheet-calendar.md) - —Ä–∞–∑–¥–µ–ª—ã 10.1, 10.2  
**–°–≤—è–∑—å —Å —ç—Ç–∞–ø–∞–º–∏:** [DOCS/TZ/implementation-stages.md](../TZ/implementation-stages.md) - –≠—Ç–∞–ø 5, –ü–æ–¥—ç—Ç–∞–ø 5.3

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–≠—Ç–æ —Ç—Ä–µ—Ç–∏–π –ø–æ–¥—ç—Ç–∞–ø —Å–æ–∑–¥–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. Store –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

**–ó–∞–≤–∏—Å–∏—Ç –æ—Ç:**
- TASK-003-01: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Bitrix24 API
- TASK-003-02: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–µ–ª–µ–º
- TASK-003-03: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∞–∑–¥–Ω–∏–∫–∞–º–∏
- TASK-001-05: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Ñ–∞–π–ª —É–∂–µ —Å–æ–∑–¥–∞–Ω)

---

## –ú–æ–¥—É–ª–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Frontend (Vue.js)
- `js/vue-apps/timesheet/stores/timesheetStore.js` ‚Äî Store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- `Bitrix24ApiService` ‚Äî –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `TimesheetApiService` ‚Äî –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
- `HolidaysService` ‚Äî –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **–û—Ç –∫–∞–∫–∏—Ö –∑–∞–¥–∞—á –∑–∞–≤–∏—Å–∏—Ç:**
  - TASK-003-01: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Bitrix24 API
  - TASK-003-02: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–µ–ª–µ–º
  - TASK-003-03: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∞–∑–¥–Ω–∏–∫–∞–º–∏
  - TASK-001-05: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —ç—Ç–æ–π:**
  - TASK-005-04: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Store
  - TASK-005-05: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Store
  - TASK-005-06: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Store

---

## –°—Ç—É–ø–µ–Ω—á–∞—Ç—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Pinia
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Pinia: `npm install pinia`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É

### –®–∞–≥ 2: –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª `js/vue-apps/timesheet/stores/timesheetStore.js`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Store
1. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `defineStore` –∏–∑ Pinia
2. –°–æ–∑–¥–∞—Ç—å Store —Å –ø–æ–º–æ—â—å—é `defineStore`
3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (state)

### –®–∞–≥ 4: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1. –°–æ–∑–¥–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
   - `id: null`
   - `name: null`
   - `position: null`
   - `loading: false`
   - `error: null`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å action `loadUser()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –®–∞–≥ 5: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–∞–±–µ–ª—è
1. –°–æ–∑–¥–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
   - `year: 2025`
   - `month: 12`
   - `days: {}`
   - `loading: false`
   - `error: null`
   - `saving: false`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å actions:
   - `loadTimesheet(year, month)` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
   - `saveTimesheet(year, month, days)` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
   - `updateDay(day, dayData)` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –¥–Ω—è

### –®–∞–≥ 6: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
1. –°–æ–∑–¥–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
   - `year: 2025`
   - `dates: []`
   - `loading: false`
   - `error: null`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å action `loadHolidays(year)` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤

### –®–∞–≥ 7: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è UI
1. –°–æ–∑–¥–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
   - `preloader: true`
   - `editModal: {open: false, day: null, year: null, month: null}`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å actions:
   - `openEditModal(day, year, month)` ‚Äî –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
   - `closeEditModal()` ‚Äî –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
   - `setPreloader(visible)` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ª–æ–∞–¥–µ—Ä–æ–º

### –®–∞–≥ 8: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è getters
1. –°–æ–∑–¥–∞—Ç—å getters –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
   - `getUser` ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `getTimesheet` ‚Äî –¥–∞–Ω–Ω—ã–µ —Ç–∞–±–µ–ª—è
   - `getHolidays` ‚Äî –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
   - `getEditModal` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Vue.js
- **–í–µ—Ä—Å–∏—è:** Vue.js 3.x (Composition API)
- **State Management:** Pinia (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ Vuex

### Pinia
- **–í–µ—Ä—Å–∏—è:** Pinia 2.x
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** –û–¥–∏–Ω Store –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Store
- State ‚Äî —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- Getters ‚Äî –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
- Actions ‚Äî –º–µ—Ç–æ–¥—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Pinia
- [ ] –°–æ–∑–¥–∞–Ω Store `timesheetStore.js`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
  - [ ] –í—Å–µ –ø–æ–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
  - [ ] Action `loadUser()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞–±–µ–ª—è:
  - [ ] –í—Å–µ –ø–æ–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
  - [ ] Actions —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (loadTimesheet, saveTimesheet, updateDay)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤:
  - [ ] –í—Å–µ –ø–æ–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
  - [ ] Action `loadHolidays()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ UI:
  - [ ] –í—Å–µ –ø–æ–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
  - [ ] Actions —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (openEditModal, closeEditModal, setPreloader)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ getters
- [ ] Store —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### timesheetStore.js
```javascript
import { defineStore } from 'pinia';
import { Bitrix24ApiService } from '../services/Bitrix24ApiService.js';
import { TimesheetApiService } from '../services/TimesheetApiService.js';
import { HolidaysService } from '../services/HolidaysService.js';
import { getCurrentYear, getCurrentMonth } from '../utils/dateHelpers.js';

/**
 * Store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ç–∞–±–µ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è
 */
export const useTimesheetStore = defineStore('timesheet', {
  state: () => ({
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user: {
      id: null,
      name: null,
      position: null,
      loading: false,
      error: null
    },
    
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞–±–µ–ª—è
    timesheet: {
      year: getCurrentYear(),
      month: getCurrentMonth(),
      days: {},
      loading: false,
      error: null,
      saving: false
    },
    
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
    holidays: {
      year: getCurrentYear(),
      dates: [],
      loading: false,
      error: null
    },
    
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ UI
    ui: {
      preloader: true,
      editModal: {
        open: false,
        day: null,
        year: null,
        month: null
      }
    }
  }),
  
  getters: {
    /**
     * –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     */
    getUser: (state) => state.user,
    
    /**
     * –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
     */
    getTimesheet: (state) => state.timesheet,
    
    /**
     * –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
     */
    getHolidays: (state) => state.holidays.dates,
    
    /**
     * –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
     */
    getEditModal: (state) => state.ui.editModal,
    
    /**
     * –ü—Ä–æ–≤–µ—Ä–∫–∞, –æ—Ç–∫—Ä—ã—Ç–æ –ª–∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
     */
    isEditModalOpen: (state) => state.ui.editModal.open
  },
  
  actions: {
    /**
     * –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     */
    async loadUser() {
      this.user.loading = true;
      this.user.error = null;
      
      try {
        const user = await Bitrix24ApiService.getCurrentUser();
        
        this.user.id = user.ID;
        
        const nameParts = [
          user.LAST_NAME,
          user.NAME,
          user.SECOND_NAME
        ].filter(Boolean);
        
        this.user.name = nameParts.length > 0 
          ? nameParts.join(' ') 
          : `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å #${user.ID}`;
        
        this.user.position = user.WORK_POSITION || '';
      } catch (error) {
        console.error('Store loadUser error:', error);
        this.user.error = error.message;
      } finally {
        this.user.loading = false;
      }
    },
    
    /**
     * –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
     */
    async loadTimesheet(year, month) {
      this.timesheet.loading = true;
      this.timesheet.error = null;
      
      try {
        const data = await TimesheetApiService.getTimesheet(year, month);
        
        this.timesheet.year = year;
        this.timesheet.month = month;
        this.timesheet.days = data?.days || {};
      } catch (error) {
        console.error('Store loadTimesheet error:', error);
        this.timesheet.error = error.message;
      } finally {
        this.timesheet.loading = false;
      }
    },
    
    /**
     * –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
     */
    async saveTimesheet(year, month, days) {
      this.timesheet.saving = true;
      this.timesheet.error = null;
      
      try {
        await TimesheetApiService.saveTimesheet(year, month, days);
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        this.timesheet.days = {
          ...this.timesheet.days,
          ...days
        };
      } catch (error) {
        console.error('Store saveTimesheet error:', error);
        this.timesheet.error = error.message;
        throw error;
      } finally {
        this.timesheet.saving = false;
      }
    },
    
    /**
     * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –¥–Ω—è
     */
    updateDay(day, dayData) {
      this.timesheet.days = {
        ...this.timesheet.days,
        [day]: dayData
      };
    },
    
    /**
     * –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
     */
    async loadHolidays(year) {
      this.holidays.loading = true;
      this.holidays.error = null;
      
      try {
        const dates = await HolidaysService.getHolidays(year);
        
        this.holidays.year = year;
        this.holidays.dates = dates;
      } catch (error) {
        console.error('Store loadHolidays error:', error);
        this.holidays.error = error.message;
      } finally {
        this.holidays.loading = false;
      }
    },
    
    /**
     * –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
     */
    openEditModal(day, year, month) {
      this.ui.editModal = {
        open: true,
        day,
        year,
        month
      };
    },
    
    /**
     * –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
     */
    closeEditModal() {
      this.ui.editModal = {
        open: false,
        day: null,
        year: null,
        month: null
      };
    },
    
    /**
     * –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ª–æ–∞–¥–µ—Ä–æ–º
     */
    setPreloader(visible) {
      this.ui.preloader = visible;
    }
  }
});
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ main.js
```javascript
import { createApp } from 'vue';
import { createPinia } from 'pinia';
import TimesheetCalendar from './TimesheetCalendar.vue';

const app = createApp(TimesheetCalendar);
const pinia = createPinia();
app.use(pinia);
app.mount('#vue-timesheet-app');
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
```vue
<script setup>
import { onMounted } from 'vue';
import { useTimesheetStore } from './stores/timesheetStore.js';

const store = useTimesheetStore();

onMounted(async () => {
  await store.loadUser();
  await store.loadTimesheet(2025, 12);
  await store.loadHolidays(2025);
  store.setPreloader(false);
});
</script>
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Store
1. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Store –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–Ω—è
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

---

## –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- **2025-12-12 12:04 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω–∞ –∑–∞–¥–∞—á–∞ TASK-005-03
- **2025-12-12 12:32 (UTC+3, –ë—Ä–µ—Å—Ç):** –î–æ–±–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ —Ç–æ–º, —á—Ç–æ —ç—Ç–æ—Ç —ç—Ç–∞–ø –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –ø–µ—Ä–µ–¥ —ç—Ç–∞–ø–∞–º–∏ 4-6
- **2025-12-12 13:00 (UTC+3, –ë—Ä–µ—Å—Ç):** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Store timesheetStore.js:
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Pinia (–≤–µ—Ä—Å–∏—è 3.0.4)
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (id, name, position, loading, error)
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞–±–µ–ª—è (year, month, days, loading, error, saving)
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ (year, dates, loading, error)
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ UI (preloader, editModal)
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ actions:
    - loadUser() - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    - loadTimesheet(year, month) - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
    - saveTimesheet(year, month, days) - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
    - updateDay(day, dayData) - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –¥–Ω—è
    - updateDays(days) - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–Ω–µ–π
    - loadHolidays(year) - –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
    - openEditModal(day, year, month) - –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    - closeEditModal() - –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    - setPreloader(visible) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ª–æ–∞–¥–µ—Ä–æ–º
    - resetTimesheet() - —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–∞–±–µ–ª—è
    - clearErrors() - —Å–±—Ä–æ—Å –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ getters:
    - getUser, getUserId, getUserName, getUserPosition
    - getTimesheet, getTimesheetYear, getTimesheetMonth, getTimesheetDays
    - getHolidays
    - getEditModal, isEditModalOpen
    - isPreloaderVisible
  - ‚úÖ Store –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Bitrix24ApiService, TimesheetApiService, HolidaysService)

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è
- Store –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ actions
- Getters –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Å—Ç—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ–¥—ç—Ç–∞–ø–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫:
- TASK-005-04: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Store
- TASK-005-05: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Store
- TASK-005-06: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Store

---

## –°–≤—è–∑—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

- **–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** [TASK-005](TASK-005-functional-components.md)
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ:** [DOCS/TZ/interface-timesheet-calendar.md](../TZ/interface-timesheet-calendar.md) - —Ä–∞–∑–¥–µ–ª—ã 10.1, 10.2

