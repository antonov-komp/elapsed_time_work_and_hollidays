# TASK-005-04: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-12 12:04 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-12-12 12:32 (UTC+3, –ë—Ä–µ—Å—Ç)  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–±–æ—Ç–µ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** Bitrix24 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (Vue.js)  
**–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** [TASK-005](TASK-005-functional-components.md)  
**–ü–æ–¥—ç—Ç–∞–ø:** 5.4 –∏–∑ 6 (–≠—Ç–∞–ø 4 –∏–∑ 6)  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1.5 –¥–Ω—è

---

## ‚ö†Ô∏è –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ü–†–û–ì–†–ê–ú–ú–ò–°–¢–ê

**–≠—Ç–æ –≠–¢–ê–ü 4 –∏–∑ 6 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ –∑–∞–¥–∞—á–∏ TASK-005.**

### üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –¢–†–ï–ë–û–í–ê–ù–ò–ï:
**–≠—Ç–∞–ø 3 (Store) –î–û–õ–ñ–ï–ù –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞!**

### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
1. ‚úÖ **–≠—Ç–∞–ø 3 –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≤–µ—Ä—à—ë–Ω** ([TASK-005-03](TASK-005-03-store.md))
2. ‚úÖ **–ù–∞—á–Ω–∏—Ç–µ —Å —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞** (TASK-005-04)
3. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è ‚Üí –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ **–≠—Ç–∞–ø—É 5** ([TASK-005-05](TASK-005-05-statistics-calculation.md))
4. **–ù–ï –Ω–∞—á–∏–Ω–∞–π—Ç–µ —ç—Ç–æ—Ç —ç—Ç–∞–ø –±–µ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞ 3!**

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å debounce –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (1.5 —Å–µ–∫—É–Ω–¥—ã)
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Store
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (3 –ø–æ–ø—ã—Ç–∫–∏)
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ **TASK-005-03: Store (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∑–∞–≤–µ—Ä—à—ë–Ω!)**
- TASK-003-02: –°–µ—Ä–≤–∏—Å —Ç–∞–±–µ–ª—è (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–æ—Ç–æ–≤)

---

## –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è —Å debounce (1.5 —Å–µ–∫—É–Ω–¥—ã), –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (3 –ø–æ–ø—ã—Ç–∫–∏).

**–°–≤—è–∑—å —Å –¢–ó:** [DOCS/TZ/interface-timesheet-calendar.md](../TZ/interface-timesheet-calendar.md) - —Ä–∞–∑–¥–µ–ª—ã 10.1, 10.3  
**–°–≤—è–∑—å —Å —ç—Ç–∞–ø–∞–º–∏:** [DOCS/TZ/implementation-stages.md](../TZ/implementation-stages.md) - –≠—Ç–∞–ø 5, –ü–æ–¥—ç—Ç–∞–ø 5.4

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–≠—Ç–æ —á–µ—Ç–≤—ë—Ä—Ç—ã–π –ø–æ–¥—ç—Ç–∞–ø —Å–æ–∑–¥–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å".

**–ó–∞–≤–∏—Å–∏—Ç –æ—Ç:**
- TASK-005-03: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Store)
- TASK-003-02: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–µ–ª–µ–º

---

## –ú–æ–¥—É–ª–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Frontend (Vue.js)
- `js/vue-apps/timesheet/stores/timesheetStore.js` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Store –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `js/vue-apps/timesheet/components/SaveIndicator.vue` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- `TimesheetApiService` ‚Äî –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **–û—Ç –∫–∞–∫–∏—Ö –∑–∞–¥–∞—á –∑–∞–≤–∏—Å–∏—Ç:**
  - TASK-005-03: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Store)
  - TASK-003-02: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–µ–ª–µ–º
- **–ö–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —ç—Ç–æ–π:**
  - TASK-005-06: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

---

## –°—Ç—É–ø–µ–Ω—á–∞—Ç—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏

### –®–∞–≥ 1: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è debounce —Ñ—É–Ω–∫—Ü–∏–∏
1. –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É `debounce` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É 1.5 —Å–µ–∫—É–Ω–¥—ã
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–º–µ–Ω—É –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –≤—ã–∑–æ–≤–∞

### –®–∞–≥ 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è debounce –≤ Store
1. –î–æ–±–∞–≤–∏—Ç—å debounce –¥–ª—è –º–µ—Ç–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
2. –í—ã–∑—ã–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–µ–ª—è
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `watch` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –®–∞–≥ 3: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
1. –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ `saving` –≤ Store
2. –û–±–Ω–æ–≤–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
3. –û–±–Ω–æ–≤–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
4. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –®–∞–≥ 4: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
1. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
2. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏
3. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –®–∞–≥ 5: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º retry (3 –ø–æ–ø—ã—Ç–∫–∏)
2. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
3. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã

### –®–∞–≥ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
1. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
2. –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ, –æ—à–∏–±–∫–∞)
3. –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–ª–∏ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Vue.js
- **–í–µ—Ä—Å–∏—è:** Vue.js 3.x (Composition API)
- **Debounce:** 1.5 —Å–µ–∫—É–Ω–¥—ã
- **Retry:** 3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### Debounce
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É (lodash) –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
- –ó–∞–¥–µ—Ä–∂–∫–∞: 1500 –º—Å

### Retry
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫: 3
- –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏: 1 —Å–µ–∫—É–Ω–¥–∞

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å debounce (1.5 —Å–µ–∫)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (3 –ø–æ–ø—ã—Ç–∫–∏)
- [ ] –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ Store
- [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –£—Ç–∏–ª–∏—Ç–∞ debounce
```javascript
/**
 * –£—Ç–∏–ª–∏—Ç–∞ debounce
 */
export function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Store —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
```javascript
import { debounce } from '../utils/debounce.js';

export const useTimesheetStore = defineStore('timesheet', {
  // ... state, getters ...
  
  actions: {
    // ... –¥—Ä—É–≥–∏–µ actions ...
    
    /**
     * –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å debounce
     */
    autoSave: debounce(async function(year, month, days) {
      this.timesheet.saving = true;
      this.timesheet.error = null;
      
      let attempts = 0;
      const maxAttempts = 3;
      
      while (attempts < maxAttempts) {
        try {
          await TimesheetApiService.saveTimesheet(year, month, days);
          
          // –£—Å–ø–µ—à–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
          this.timesheet.saving = false;
          this.timesheet.lastSaved = new Date();
          return;
        } catch (error) {
          attempts++;
          
          if (attempts >= maxAttempts) {
            // –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã
            console.error('Auto-save failed after', maxAttempts, 'attempts:', error);
            this.timesheet.error = error.message;
            this.timesheet.saving = false;
            throw error;
          }
          
          // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–æ–π
          await new Promise(resolve => setTimeout(resolve, 1000));
        }
      }
    }, 1500),
    
    /**
     * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–Ω—è —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
     */
    updateDay(day, dayData) {
      this.timesheet.days = {
        ...this.timesheet.days,
        [day]: dayData
      };
      
      // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
      this.autoSave(
        this.timesheet.year,
        this.timesheet.month,
        this.timesheet.days
      );
    }
  }
});
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
```vue
<template>
  <div class="save-indicator" v-if="show">
    <span v-if="saving" class="saving">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...</span>
    <span v-else-if="saved" class="saved">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
    <span v-else-if="error" class="error">–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</span>
  </div>
</template>

<script setup>
import { computed } from 'vue';
import { useTimesheetStore } from '../stores/timesheetStore.js';

const store = useTimesheetStore();

const saving = computed(() => store.timesheet.saving);
const error = computed(() => store.timesheet.error);
const saved = computed(() => !saving.value && !error.value && store.timesheet.lastSaved);

const show = computed(() => saving.value || saved.value || error.value);
</script>

<style scoped>
.save-indicator {
  position: fixed;
  bottom: 20px;
  right: 20px;
  padding: 10px 15px;
  background-color: #fff;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  font-size: 12px;
}

.saving {
  color: #3498db;
}

.saved {
  color: #2ecc71;
}

.error {
  color: #e74c3c;
}
</style>
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
1. –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–∞–±–µ–ª—è
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥—ã
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

---

## –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

- **2025-12-12 12:04 (UTC+3, –ë—Ä–µ—Å—Ç):** –°–æ–∑–¥–∞–Ω–∞ –∑–∞–¥–∞—á–∞ TASK-005-04
- **2025-12-12 12:32 (UTC+3, –ë—Ä–µ—Å—Ç):** –î–æ–±–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç—Ç–∞–ø–∞ 3 (Store)
- **2025-12-12 13:05 (UTC+3, –ë—Ä–µ—Å—Ç):** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
  - ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ debounce.js –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ lastSaved –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–∞–±–µ–ª—è
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ _autoSaveInternal —Å retry (3 –ø–æ–ø—ã—Ç–∫–∏, –∑–∞–¥–µ—Ä–∂–∫–∞ 1 —Å–µ–∫)
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ autoSave —Å debounce (1.5 —Å–µ–∫—É–Ω–¥—ã)
  - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã updateDay –∏ updateDays –¥–ª—è –≤—ã–∑–æ–≤–∞ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  - ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω –º–µ—Ç–æ–¥ saveTimesheet –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ lastSaved
  - ‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SaveIndicator.vue –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω getter getLastSaved –≤ Store

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è
- Debounce –¥–æ–ª–∂–µ–Ω –æ—Ç–º–µ–Ω—è—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤—ã–∑–æ–≤—ã
- Retry –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤—ã–º

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ–¥—ç—Ç–∞–ø–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫:
- TASK-005-05: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- TASK-005-06: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

---

## –°–≤—è–∑—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

- **–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:** [TASK-005](TASK-005-functional-components.md)
- **–ü—Ä–µ–¥—ã–¥—É—â–∏–π –ø–æ–¥—ç—Ç–∞–ø:** [TASK-005-03](TASK-005-03-store.md)
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ:** [DOCS/TZ/interface-timesheet-calendar.md](../TZ/interface-timesheet-calendar.md) - —Ä–∞–∑–¥–µ–ª—ã 10.1, 10.3

